# VPC

## NAT ゲートウェイ

### プライベートサブネットからインターネットにアクセスする

#### 前提
- AZ-A のパブリックサブネットには パブリック NAT ゲートウェイ。
- AZ-B のプライベートサブネットにはインスタンス。

#### 結論
- インターネットからインスタンスへはアクセス不可
- インスタンスからインターネットへのアウトバウンドトラフィックは可能。
  - ルーターがインスタンスから NAT ゲートウェイにインターネットバウンドトラフィックを送信。
  - NAT ゲートウェイは、自身の elastic IP アドレスを送信元 IP アドレスとして使用し、インターネットゲートウェイにトラフィックを送信。

#### その他
- ALBがある場合のインスタンスからのアウトバウンドトラフィックは、ALBを経由するのか？と疑問に思ったが、`インスタンス -> ルーター -> NAT -> IG` という流れっぽい。確信は持てていない。
- その辺りのトラフィックはどうやって確認すれば良い？

<img src="https://docs.aws.amazon.com/ja_jp/vpc/latest/userguide/images/nat-gateway-diagram.png">